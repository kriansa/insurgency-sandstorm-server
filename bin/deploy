#!/usr/bin/env bash
# shellcheck disable=SC1091
#
# Deploy this service

# cd to root path
cd "$(dirname "$0")/.." || exit;

# Build required deployment dependencies
( cd app/lib/player-counter && GOOS=linux GOARCH=amd64 make clean build )

# Deploy!
cd ops/terraform && terraform-auto \
  --environment-file="../../.env" \
  --backend-template-file="backend.tf-template" \
  apply
